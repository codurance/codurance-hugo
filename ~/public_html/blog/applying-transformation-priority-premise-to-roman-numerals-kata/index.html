<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9">  <![endif]-->
<!--[if !IE]><!--> <html lang="en">  <!--<![endif]-->
<head>
    <title>Applying Transformation Priority Premise to Roman Numerals Kata | Codurance | London</title>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Our team of dedicated software craftsmen provides consultancy, software development, and training services to clients seeking high quality development processes and software solutions.">
    <meta name="author" content="Codurance Ltd">

    
    <meta property="og:site_name" content="Codurance"/>
    <meta property="og:description" content="Our team of dedicated software craftsmen provides consultancy, software development, and training services to clients seeking high quality development processes and software solutions."/>
    <meta property="og:url" content="http://codurance.com/"/>
    <meta property="og:image" content="http://codurance.com/assets/img/codurance.png"/>

    
    <link rel="shortcut icon" href="/assets/img/favicon.ico">

    
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/blocks.css">
    <link rel="stylesheet" href="/assets/css/blog.style.css">

    
    <link rel="stylesheet" href="/assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/plugins/owl.carousel.2.0.0/assets/owl.carousel.css">

    
    <link rel="stylesheet" href="/assets/css/plugins.css">
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="stylesheet" href="/assets/css/pages/blog.css">
    <link rel="stylesheet" href="/assets/css/theme-colors/orange.css">
    <link rel="stylesheet" href="/assets/css/headers/header-default.css">
    <link rel="stylesheet" href="/assets/css/footers/footer-v1.css">


    
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/idea.min.css">
    
    <link href='http://fonts.googleapis.com/css?family=Oxygen:700,400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

    

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-46289079-1', 'codurance.com');
        ga('send', 'pageview');
    </script>
    <script src="/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">stLight.options({publisher: "8b795ed1-9577-43d1-9e4e-55c54306336b", doNotHash: true, doNotCopy: false, hashAddressBar: false});</script>
</head>
<body>

<div class="wrapper">
    <div class="header no-topbar">
    <div class="container">
        
        <a class="logo" href="/">
            <img class="logo-header" src="/assets/img/codurance.png" alt="Codurance Logo" height="45px;">
        </a>
        

        
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-bars"></span>
        </button>
        
    </div>

    
    <div class="collapse navbar-collapse mega-menu navbar-responsive-collapse">
        <div class="container">
            <ul class="nav navbar-nav">
                
                    <li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown">Services <i class="icon-angle-down">&nbsp;</i></a>
    <ul class="dropdown-menu">
        
            <li><a href="/services/software-creation">Software Creation</a></li>
        
            <li><a href="/services/training">Training</a></li>
        
    </ul>
</li>

                
                    <li><a href="/videos">Videos</a></li>
                
                    <li class="active"><a href="/blog">Blog</a></li>
                
                    <li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown">About Us  <i class="icon-angle-down">&nbsp;</i></a>
    <ul class="dropdown-menu">
        
            <li><a href="/aboutus/ourteam">Our Team</a></li>
        
            <li><a href="/aboutus/ourcompany">Our Company</a></li>
        
            <li><a href="/aboutus/ourpractices">Our Practices</a></li>
        
            <li><a href="http://www.meetup.com/london-software-craftsmanship">Our Community</a></li>
        
    </ul>
</li>

                
                    <li><a href="/work-with-us">Work with us</a></li>
                
                    <li><a href="/aboutus/contact">Contact Us</a></li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="bg-color-light">
    <div class="container content-sm">
        <div class="row blog-page blog-item">
            
            <div class="col-md-9">
                
                <div class="news-v3 bg-color-white margin-bottom-30">
                    <div class="news-v3-in shareThisButtons">
                        <h1>Applying Transformation Priority Premise to Roman Numerals Kata</h1>
                        <ul class="list-inline posted-info">
                            <li>By <a class='author' href='/blog/author/pedro-santos'>Pedro Santos</a></li>
                            <li>Posted 11 May 2015</li>
                            <li>
                                
                                <a href="/tags/tdd/"><i class="fa fa-tags"></i><span class="blog-tag-margin"> TDD</span></a>
                                
                                <a href="/tags/.net/"><i class="fa fa-tags"></i><span class="blog-tag-margin"> .net</span></a>
                                
                            </li>
                        </ul>

                        

<blockquote>
<p>&ldquo;As tests get more specific code gets more generic.&rdquo; - Uncle Bob</p>
</blockquote>

<h2 id="tdd">TDD</h2>

<p>Often one of the doubts we have when developing software driven by tests is how to evolve code in small and steady paces guided by tests (baby steps). TDD looks deceptively easy and only when we get more experience do we recognize this. The three laws of TDD state:</p>

<ol>
<li>You are not allowed to write any production code unless it is to make a failing unit test pass.</li>
<li>You are not allowed to write any more of a unit test than is sufficient to fail; and compilation failures are failures.</li>
<li>You are not allowed to write any more production code than is sufficient to pass the one failing unit test.</li>
</ol>

<p>On this post I would like to concentrate on the third law.
On May 2013 Robert C. Martin AKA Uncle Bob wrote a seminal post titled <a href="http://blog.8thlight.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">&ldquo;Transformation Priority Premise&rdquo;</a>. Go read it, I will wait here. Alternatively <a href="https://vimeo.com/97516288">watch</a> him talk about it.</p>

<h2 id="what-is-this-post-about">What is this post about?</h2>

<p>I had to prepare a presentation on Transformation Priority Premise. I tried to document how I could use this technique to implement an algorithm. My objective was to implement it trying not to skip any of the transformations and moving through them in the order they are defined.</p>

<h2 id="transformation-priority-premise">Transformation Priority Premise</h2>

<p>The transformations list gives guidance on how to apply small transformations to the code under test in order to evolve it to a more generic implementation. We should try to avoid taking big leaps forward when a small transformation will do. Remember the third law of TDD: &ldquo;You are not allowed to write any more production code than is sufficient to pass the one failing unit test.&rdquo; &ldquo;Transformations on the top of the list should be preferred to those that are lower. It is better (or simpler) to change a constant into a variable than it is to add an if statement. So when making a test pass, you try to do so with transformations that are simpler (higher on the list) than those that are more complex.&rdquo;
On the table below you can find the transformations list.</p>

<ol>
<li>({} -&gt; nil) no code at all-&gt;code that employs nil</li>
<li>(nil -&gt; constant)</li>
<li>(constant -&gt; constant+) a simple constant to a more complex constant</li>
<li>(constant -&gt; scalar) replacing a constant with a variable or an argument</li>
<li>(statement -&gt; statements) adding more unconditional statements.</li>
<li>(unconditional -&gt; if) splitting the execution path</li>
<li>(scalar -&gt; array)</li>
<li>(array -&gt; container)</li>
<li>(statement -&gt; recursion)</li>
<li>(if -&gt; while)</li>
<li>(expression -&gt; function) replacing an expression with a function or algorithm</li>
<li>(variable -&gt; assignment) replacing the value of a variable.</li>
</ol>

<h2 id="roman-numbers">Roman Numbers</h2>

<p>If you are familiar with this kata please move to the next section implementation.</p>

<h3 id="definition">Definition</h3>

<p>Given a positive integer number (eg. 42) determine its Roman numeral representation as a String (eg &ldquo;XLII&rdquo;). You cannot write numerals like IM for 999.</p>

<h3 id="examples">Examples</h3>

<table>
<thead>
<tr>
<th>Arabic number</th>
<th>Roman numeral</th>
<th>Arabic number</th>
<th>Roman numeral</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>I</td>
<td>60</td>
<td>LX</td>
</tr>

<tr>
<td>2</td>
<td>II</td>
<td>70</td>
<td>LXXX</td>
</tr>

<tr>
<td>3</td>
<td>III</td>
<td>80</td>
<td>LXXX</td>
</tr>

<tr>
<td>4</td>
<td>IV</td>
<td>90</td>
<td>XC</td>
</tr>

<tr>
<td>5</td>
<td>V</td>
<td>100</td>
<td>C</td>
</tr>

<tr>
<td>6</td>
<td>VI</td>
<td>200</td>
<td>CC</td>
</tr>

<tr>
<td>7</td>
<td>VII</td>
<td>300</td>
<td>CCC</td>
</tr>

<tr>
<td>8</td>
<td>VIII</td>
<td>400</td>
<td>CD</td>
</tr>

<tr>
<td>9</td>
<td>IX</td>
<td>500</td>
<td>D</td>
</tr>

<tr>
<td>10</td>
<td>X</td>
<td>600</td>
<td>DC</td>
</tr>

<tr>
<td>20</td>
<td>XX</td>
<td>700</td>
<td>DCC</td>
</tr>

<tr>
<td>30</td>
<td>XXX</td>
<td>800</td>
<td>DCCC</td>
</tr>

<tr>
<td>40</td>
<td>XL</td>
<td>900</td>
<td>CM</td>
</tr>

<tr>
<td>50</td>
<td>L</td>
<td>1000</td>
<td>M</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Arabic number</th>
<th>Roman numeral</th>
<th>Thousands</th>
<th>Cents</th>
<th>Tenths</th>
<th>Units</th>
</tr>
</thead>

<tbody>
<tr>
<td>846</td>
<td>DCCCXLVI</td>
<td>-</td>
<td>DCC</td>
<td>XL</td>
<td>VI</td>
</tr>

<tr>
<td>1999</td>
<td>MCMXCIX</td>
<td>M</td>
<td>CM</td>
<td>XC</td>
<td>IX</td>
</tr>

<tr>
<td>2008</td>
<td>MMVIII</td>
<td>MM</td>
<td>-</td>
<td>-</td>
<td>VIII</td>
</tr>
</tbody>
</table>

<h2 id="implementation">Implementation</h2>

<p>We start by writing the simplest unit test we can think of.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}
</code></pre>

<p>We start the implementation using the first transformation <em>no code to nil</em></p>

<pre><code class="language-csharp">// 1 nil
public class RomanConverter
{
    public string Convert(int number)
    {
        return null;
    }
}
</code></pre>

<p>The first transformation is not enough to make the test pass so we apply the second transformation <em>nil to constant</em>. This is enough to make the test pass so we stop evolving the code until we have a failing test.</p>

<pre><code class="language-csharp">// 2 nil -&gt; constant
public class RomanConverter
{
    public string Convert(int number)
    {
        return &quot;I&quot;;
    }
}
</code></pre>

<p>We add a new failing test.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}
</code></pre>

<p>The next transformation <em>constant to variable</em> is not sufficient to make the test pass.</p>

<pre><code class="language-csharp">// 4 Constant -&gt; variable
public class RomanConverter
{
    public string Convert(int number)
    {
        var result = &quot;I&quot;;
        return result;
    }
}
</code></pre>

<p>The next transformation <em>statement to statements</em> is also not sufficient to make the test pass.</p>

<pre><code class="language-csharp">// 5 statement -&gt; statements
public class RomanConverter
{
    public string Convert(int number)
    {
        var result = &quot;I&quot;;
        result += &quot;I&quot;;

        return result;
    }
}
</code></pre>

<p>Applying the next transformation <em>unconditional to conditional</em> is sufficient to make the test pass.</p>

<pre><code class="language-csharp">// 6 unconditional -&gt; conditional
public class RomanConverter
{
    public string Convert(int number)
    {
        var result = &quot;I&quot;;

        if (number &gt;= 1)
        {
            result += &quot;I&quot;;
        }

        return result;
    }
}
</code></pre>

<p>We add a new failing test.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    [TestCase(3, &quot;III&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}
</code></pre>

<p>Adding another conditional will make the test pass, but we have duplication.</p>

<pre><code class="language-csharp">public class RomanConverter
{
    public string Convert(int number)
    {
        var result = &quot;I&quot;;
        if (number &gt; 1)
        {
            result += &quot;I&quot;;
        }

        if (number &gt; 2)
        {
            result += &quot;I&quot;;
        }

        return result;
    }
}
</code></pre>

<p>Applying the next transformation <em>variable to array</em> removes the duplication.</p>

<pre><code class="language-csharp">// 7 variable -&gt; array
public class RomanConverter
{
    public static readonly string[] Results = { &quot;I&quot;, &quot;II&quot;, &quot;III&quot; };

    public string Convert(int number)
    {
        return Results[number - 1];
    }
}
</code></pre>

<p>We add a new failing test.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    [TestCase(3, &quot;III&quot;)]
    [TestCase(4, &quot;IV&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}
</code></pre>

<p>To make the test pass we don&rsquo;t need to apply the next transformation, we can make the test pass by adding a new element to the array.</p>

<pre><code class="language-csharp">// no transformation
public class RomanConverter
{
    public static readonly string[] Results = { &quot;I&quot;, &quot;II&quot;, &quot;III&quot;, &quot;IV&quot; };

    public string Convert(int number)
    {
        return Results[number - 1];
    }
}
</code></pre>

<p>While adding a new element to the array was enough to make the test pass, we now spot some duplication on character &ldquo;I&rdquo;. By applying the next transformation <em>statement to tail</em> recursion we can get rid of this duplication. Since we are trying to follow the transformation table we applied the <em>array to collection</em> transformation before the tail recursion.</p>

<pre><code class="language-csharp">// 8 array -&gt; collection
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results =
        new Dictionary&lt;int, string&gt;
        {
            {1, &quot;I&quot;},
            {2, &quot;II&quot;},
            {3, &quot;III&quot;},
            {4, &quot;IV&quot;},
        };

    public string Convert(int number)
    {
        return Results[number];
    }
}

// 9 statement -&gt; tail recursion
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results = new Dictionary&lt;int, string&gt;
    {
        {1, &quot;I&quot;},
        {4, &quot;IV&quot;},
    };

    public string Convert(int number)
    {
        if (Results.ContainsKey(number))
        {
            return Results[number];
        }

        return Results[1] + Convert(number - 1);
    }
}
</code></pre>

<p>We add a few more failing tests but since the last transformation was still allowing us to make tests pass we waited until we had duplication to refactor.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    [TestCase(3, &quot;III&quot;)]
    [TestCase(4, &quot;IV&quot;)]
    [TestCase(5, &quot;V&quot;)]
    [TestCase(6, &quot;VI&quot;)]
    [TestCase(7, &quot;VII&quot;)]
    [TestCase(8, &quot;VIII&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}
</code></pre>

<p>No other transformations required, simply adding new values to the dictionary allowed us to make the tests pass but we can now spot duplication, again around character &ldquo;I&rdquo;.</p>

<pre><code class="language-csharp">public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results =
    new Dictionary&lt;int, string&gt;
    {
        {1, &quot;I&quot;},
        {4, &quot;IV&quot;},
        {5, &quot;V&quot;},
        {6, &quot;VI&quot;},
        {7, &quot;VII&quot;},
        {8, &quot;VIII&quot;},
    };

    public string Convert(int number)
    {
        if (Results.ContainsKey(number))
        {
            return Results[number];
        }

        return Results[1] + Convert(number - 1);
    }
}
</code></pre>

<p>To fix the duplication we apply again the transformation, <em>statement to tail recursion</em>, to fix this. We don&rsquo;t yet need to move to the next transformation.</p>

<pre><code class="language-csharp">// 9 statement -&gt; tail recursion
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results =
    new Dictionary&lt;int, string&gt;
    {
        {1, &quot;I&quot;},
        {4, &quot;IV&quot;},
        {5, &quot;V&quot;},
    };

    public string Convert(int number)
    {
        if (Results.ContainsKey(number))
        {
            return Results[number];
        }

        if (number &gt; 5)
        {
            const string result = &quot;V&quot;;
            return result + Convert(number - 5);
        }

        return Results[1] + Convert(number - 1);
    }
}
</code></pre>

<p>Again we add more failing tests, and again, the last transformation is still making tests pass.</p>

<pre><code class="language-csharp">[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    [TestCase(3, &quot;III&quot;)]
    [TestCase(4, &quot;IV&quot;)]
    [TestCase(5, &quot;V&quot;)]
    [TestCase(6, &quot;VI&quot;)]
    [TestCase(7, &quot;VII&quot;)]
    [TestCase(8, &quot;VIII&quot;)]
    [TestCase(9, &quot;IX&quot;)]
    [TestCase(10, &quot;X&quot;)]
    [TestCase(40, &quot;XL&quot;)]
    [TestCase(44, &quot;XLIV&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}

// Wait for patterns to emerge
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results =
        new Dictionary&lt;int, string&gt;
        {
            {1, &quot;I&quot;},
            {4, &quot;IV&quot;},
            {5, &quot;V&quot;},
            {9, &quot;IX&quot;},
            {10, &quot;X&quot;},
            {40, &quot;XL&quot;},
        };

    public string Convert(int number)
    {
        if (Results.ContainsKey(number))
        {
            return Results[number];
        }

        if (number &gt; 40)
        {
            const string result = &quot;XL&quot;;
            return result + Convert(number - 40);
        }

        if (number &gt; 10)
        {
            const string result = &quot;X&quot;;
            return result + Convert(number - 10);
        }

        if (number &gt; 5)
        {
            const string result = &quot;V&quot;;
            return result + Convert(number - 5);
        }

        return Results[1] + Convert(number - 1);
    }
}
</code></pre>

<p>We spot duplication around if statements, so we refactor the code to the next transformation <em>if to while</em>. This gets rid of if statement duplication, but we now have while statement duplication.</p>

<pre><code class="language-csharp">// 10 if -&gt; while
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; Results =
        new Dictionary&lt;int, string&gt;
        {
            {1, &quot;I&quot;},
            {4, &quot;IV&quot;},
            {5, &quot;V&quot;},
            {9, &quot;IX&quot;},
            {10, &quot;X&quot;},
            {40, &quot;XL&quot;},
        };

    public string Convert(int number)
    {
        if (Results.ContainsKey(number))
        {
            return Results[number];
        }

        string result = string.Empty;

        while (number &gt;= 40)
        {
            result += &quot;XL&quot;;
            number -= 40;
        }

        while (number &gt;= 10)
        {
            result += &quot;X&quot;;
            number -= 10;
        }

        while (number &gt;= 5)
        {
            result += &quot;V&quot;;
            number -= 5;
        }

        while (number &gt;= 4)
        {
            result += &quot;IV&quot;;
            number -= 4;
        }

        while (number &gt;= 1)
        {
            result += &quot;I&quot;;
            number -= 1;
        }

        return result;
    }
}
</code></pre>

<p>We apply the same <em>if to while</em> transformation to the remaining if statement and this allows us to get rid of the duplicated while statements. In order for this to work it&rsquo;s more convenient to have the dictionary reversed so we also do this.</p>

<pre><code class="language-csharp">// 10 if -&gt; while
public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; mappings =
        new Dictionary&lt;int, string&gt;
        {
            {40, &quot;XL&quot;},
            {10, &quot;X&quot;},
            {9, &quot;IX&quot;},
            {5, &quot;V&quot;},
            {4, &quot;IV&quot;},
            {1, &quot;I&quot;},
        };

    public string Convert(int number)
    {
        string result = string.Empty;
        var mappingsEnumerator = mappings.GetEnumerator();

        while (mappingsEnumerator.MoveNext())
        {
            var mapping = mappingsEnumerator.Current;

            while (number &gt;= mapping.Key)
            {
                result += mapping.Value;
                number -= mapping.Key;
            }
        }

        return result;
    }
}
</code></pre>

<p>We add more failing tests but the last transformation is sufficient to make all new tests pass and we cannot think of anymore failing tests, this implies we are done. We refactor the code to make it more readable and we are done. We decided not to refactor the outer while loop to a foreach loop. Although this could simplify the code, a foreach loop is not in the transformation premise list so we decided against it for the purposes of this post.</p>

<pre><code class="language-csharp">// final solution
[TestFixture]
public class RomanConverterShould
{
    [TestCase(1, &quot;I&quot;)]
    [TestCase(2, &quot;II&quot;)]
    [TestCase(3, &quot;III&quot;)]
    [TestCase(4, &quot;IV&quot;)]
    [TestCase(5, &quot;V&quot;)]
    [TestCase(6, &quot;VI&quot;)]
    [TestCase(7, &quot;VII&quot;)]
    [TestCase(8, &quot;VIII&quot;)]
    [TestCase(9, &quot;IX&quot;)]
    [TestCase(10, &quot;X&quot;)]
    [TestCase(40, &quot;XL&quot;)]
    [TestCase(50, &quot;L&quot;)]
    [TestCase(90, &quot;XC&quot;)]
    [TestCase(100, &quot;C&quot;)]
    [TestCase(400, &quot;CD&quot;)]
    [TestCase(500, &quot;D&quot;)]
    [TestCase(900, &quot;CM&quot;)]
    [TestCase(1000, &quot;M&quot;)]
    [TestCase(846, &quot;DCCCXLVI&quot;)]
    [TestCase(1999, &quot;MCMXCIX&quot;)]
    [TestCase(2008, &quot;MMVIII&quot;)]
    public void ConvertNumberToRoman(int number, string expected)
    {
        var romanNumeral = new RomanConverter().Convert(number);
        Assert.That(romanNumeral, Is.EqualTo(expected));
    }
}

public class RomanConverter
{
    public static readonly IDictionary&lt;int, string&gt; arabicsToRomans =
            new Dictionary&lt;int, string&gt;
            {
                {1000, &quot;M&quot;},
                {900, &quot;CM&quot;},
                {500, &quot;D&quot;},
                {400, &quot;CD&quot;},
                {100, &quot;C&quot;},
                {90, &quot;XC&quot;},
                {50, &quot;L&quot;},
                {40, &quot;XL&quot;},
                {10, &quot;X&quot;},
                {9, &quot;IX&quot;},
                {5, &quot;V&quot;},
                {4, &quot;IV&quot;},
                {1, &quot;I&quot;},
            };

        public string Convert(int number)
        {
            var romanNumeral = string.Empty;
            var arabicsToRomansEnumerator = arabicsToRomans.GetEnumerator();

            while (arabicsToRomansEnumerator.MoveNext())
            {
                var arabicToRoman = arabicsToRomansEnumerator.Current;
                var arabicNumeral = arabicToRoman.Key;
                var romanNumeral = arabicToRoman.Value;

                while (number &gt;= arabicNumeral)
                {
                    result += romanNumeral;
                    number -= arabicNumeral;
                }
            }

            return romanNumeral;
        }
    }
}
</code></pre>

<h2 id="conclusions">Conclusions</h2>

<p>For the purpose of this post I think the code as is, illustrates the process described by Robert Martin, AKA Uncle Bob, to refactor code from specific to generic guided by tests. Deliberately following the Transformation Priority Premise while coding was a very interesting exercise, it provided guidance while avoiding big leap refactors. I found out that when I was stuck, most of the time, the solution was just applying the next transformation on the table.</p>

<h2 id="links">Links</h2>

<p><a href="http://blog.8thlight.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">http://blog.8thlight.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html</a></p>

<p><a href="https://vimeo.com/97516288">https://vimeo.com/97516288</a></p>

<p><a href="http://en.wikipedia.org/wiki/Transformation_Priority_Premise">http://en.wikipedia.org/wiki/Transformation_Priority_Premise</a></p>


                        

                        <div id="sharethisButtons">
                            <span class='pull-right st_twitter_large' displayText='Tweet' st_url='http://codurance.com/blog/applying-transformation-priority-premise-to-roman-numerals-kata/'></span>
                            <span class='pull-right st_linkedin_large' displayText='LinkedIn' st_url='http://codurance.com/blog/applying-transformation-priority-premise-to-roman-numerals-kata/'></span>
                            <span class='pull-right st_email_large' displayText='Email' st_url='http://codurance.com/blog/applying-transformation-priority-premise-to-roman-numerals-kata/'></span>
                            <span class='pull-right st_sharethis_large' displayText='ShareThis' st_url='http://codurance.com/blog/applying-transformation-priority-premise-to-roman-numerals-kata/'></span>
                        </div>
                    </div>
                </div>
                
                
                
                <div class = "blog-author bg-color-white margin-bottom-30">
                    <div class="headline headline-md margin-bottom-30">
                        <h2>About the author</h2>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 pull-left">
                            <img class="img-responsive"  id="author-img" src="/assets/img/custom/team/pedro_santos.jpg">
                        </div>
                        <div class="col-sm-9">
                            <div class="blog-author-desc">
                                <div class="overflow-h">
                                    <h4>Pedro Santos</h4>
                                    
                                    <ul class="list-inline">
                                        <li><a href="https://twitter.com/intent/tweet?text=.%20@pedromsantos%20Type%20your%20text%20here&url=http%3a%2f%2fcodurance.com%2fblog%2fapplying-transformation-priority-premise-to-roman-numerals-kata%2f&via=codurance"><i class="fa fa-twitter"></i></a></li>
                                    </ul>
                                    
                                </div>
                                <p>Pedro is a software craftsman with over twenty years experience. Passionate about the web, distributed systems and mobile technology. Advocate of agile practices and the software craftsmanship movement. Has been key in bringing Software Craftsmanship practices into several organizations.</p><p>Member of developer groups such as: London Software Craftsmanship Community, NSCoders and Agile Barcelona. Frequent speaker on subjects such as: Software Craftsmanship, web and mobile solutions.</p>

                            </div>
                        </div>
                    </div>
                </div>
                
                
            </div>
            

            
            <div class="col-md-3">
                
                <div class="posts margin-bottom-40">
                    <div class="headline-v2">
                        <h2>Related Blogs</h2>
                    </div>

                        
                        
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                        <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                            <div class="blog-thumb-hover">
                                <a href="/blog/My-first-walking-skeleton/">
                                    <img class="rounded-x" src="/assets/img/custom/blog/squirrel-skeleton.jpg" alt=""></img>
                                </a>
                                <a class="hover-grad" href="/blog/My-first-walking-skeleton/">
                                    <i class="fa fa-hand-spock-o"></i>
                                </a>
                            </div>
                            <div class="blog-thumb-desc">
                                <h3><a href="/blog/My-first-walking-skeleton/">My first walking skeleton</a></h3>
                                <ul class="blog-thumb-info">
                                    <li>
                                        Franziska Sauerwein
                                    </li>
                                </ul>
                            </div>
                        </div>
                            
                        
                            
                            
                                
                        <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                            <div class="blog-thumb-hover">
                                <a href="/blog/How-katas-can-help-you-learn/">
                                    <img class="rounded-x" src="/assets/img/custom/blog/Baton_long.jpg" alt=""></img>
                                </a>
                                <a class="hover-grad" href="/blog/How-katas-can-help-you-learn/">
                                    <i class="fa fa-hand-spock-o"></i>
                                </a>
                            </div>
                            <div class="blog-thumb-desc">
                                <h3><a href="/blog/How-katas-can-help-you-learn/">How katas can help you learn</a></h3>
                                <ul class="blog-thumb-info">
                                    <li>
                                        Ana Nogal
                                    </li>
                                </ul>
                            </div>
                        </div>
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                        <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                            <div class="blog-thumb-hover">
                                <a href="/blog/how-to-start-doing-tdd-in-iOS/">
                                    <img class="rounded-x" src="/assets/img/custom/blog/red_green_tdd_ios.jpg" alt=""></img>
                                </a>
                                <a class="hover-grad" href="/blog/how-to-start-doing-tdd-in-iOS/">
                                    <i class="fa fa-hand-spock-o"></i>
                                </a>
                            </div>
                            <div class="blog-thumb-desc">
                                <h3><a href="/blog/how-to-start-doing-tdd-in-iOS/">How to start doing TDD in iOS</a></h3>
                                <ul class="blog-thumb-info">
                                    <li>
                                        Ana Nogal
                                    </li>
                                </ul>
                            </div>
                        </div>
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                        <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                            <div class="blog-thumb-hover">
                                <a href="/blog/creating-a-local-nuget-repository/">
                                    <img class="rounded-x" src="/assets/img/custom/blog/2015-05-01-creating-a-local-nuget-repository/package-delivery.png" alt=""></img>
                                </a>
                                <a class="hover-grad" href="/blog/creating-a-local-nuget-repository/">
                                    <i class="fa fa-hand-spock-o"></i>
                                </a>
                            </div>
                            <div class="blog-thumb-desc">
                                <h3><a href="/blog/creating-a-local-nuget-repository/">Creating a local NuGet repository for offline development</a></h3>
                                <ul class="blog-thumb-info">
                                    <li>
                                        Steve Lydford
                                    </li>
                                </ul>
                            </div>
                        </div>
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                    </h1>
                </div>
                
                <div class="posts margin-bottom-40">
                    <div class="headline-v2"><h2>Recent Blogs</h2></div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/kafka.jpg" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/Publish-subscribe-model-in-Kafka/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/Publish-subscribe-model-in-Kafka/">Publish-subscribe model in Kafka</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Felipe Fernández
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/2016-05-16-bowling.jpg" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/bowling-kata-in-clojure-fsharp-scala/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/bowling-kata-in-clojure-fsharp-scala/">Bowling Kata in Clojure, F# and Scala</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Sandro Mancuso
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/2016-05-14-retrospective-park/hibiscus.jpg" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/retrospective-park/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/retrospective-park/">A Retrospective in the Park</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Matthew Butt
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/penguins.jpg" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/initiative-circles/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/initiative-circles/">Initiative Circles</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Mashooq Badar
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/aws-lambda.png" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/aws-lambdas/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/aws-lambdas/">AWS Lambda for Beginners</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Mashooq Badar
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/machine.png" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/finite-state-machines-with-akka/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/finite-state-machines-with-akka/">Finite state machines with Akka</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Felipe Fernández
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="blog-thumb blog-thumb-circle margin-bottom-15">
                        <div class="blog-thumb-hover">
                            <a href="/">
                                <img class="rounded-x" src="/assets/img/custom/blog/code-smells_II.jpg" alt=""></img>
                            </a>
                            <a class="hover-grad" href="/blog/code-smells%E2%80%93part-two/">
                                <i class="fa fa-hand-spock-o"></i>
                            </a>
                        </div>
                        <div class="blog-thumb-desc">
                            <h3><a href="/blog/code-smells%E2%80%93part-two/">Code Smells – Part II</a></h3>
                            <ul class="blog-thumb-info">
                                <li>
                                    Ana Nogal
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    
                </div>
                
            </div>
            
        </div>
        
    </div>
    
</div>



    
<div id="footer-v1" class="footer-v1">
    <div class="footer">
        <div class="container">
            <div class="row">
                
                <div class="col-md-3 md-margin-bottom-40">
                    <a href="/">
                        <img id="logo-footer" class="footer-logo" src="/assets/img/footer-logo.png" alt="Codurance">
                    </a>
                    <p>Software is our passion. </p>
                    <p>We are software craftsmen. We build well-crafted software for our customers, we help developers to get better at their craft through training, coaching and mentoring, and we help companies get better at delivering software. </p>
                </div>
                

                
                <div class="col-md-3 md-margin-bottom-40">
                    <div class="posts">
                        <div class="headline"><h2>Latest Blogs</h2></div>
                        <ul class="list-unstyled latest-list">
                            
                            <li>
                                <a href="/blog/Publish-subscribe-model-in-Kafka/" alt="Publish-subscribe model in Kafka">Publish-subscribe model in Kafka</a>
                                <small>Felipe Fernández</small>
                            </li>
                            
                            <li>
                                <a href="/blog/bowling-kata-in-clojure-fsharp-scala/" alt="Bowling Kata in Clojure, F# and Scala">Bowling Kata in Clojure, F#...</a>
                                <small>Sandro Mancuso</small>
                            </li>
                            
                            <li>
                                <a href="/blog/retrospective-park/" alt="A Retrospective in the Park">A Retrospective in the Park</a>
                                <small>Matthew Butt</small>
                            </li>
                            
                        </ul>
                    </div>
                </div>
                

                
                <div class="col-md-3 md-margin-bottom-40">
                    <div class="headline"><h2>Useful Links</h2></div>
                    <ul class="list-unstyled link-list">
                        <li><a href="/services/software-creation">Software creation</a><i class="fa fa-angle-right"></i></li>
                        <li><a href="/services/training">Training</a><i class="fa fa-angle-right"></i></li>
                        <li><a href="/work-with-us">Work with us</a><i class="fa fa-angle-right"></i></li>
                        <li><a href="/aboutus/ourcompany">About us</a><i class="fa fa-angle-right"></i></li>
                        <li><a href="/policies/privacy">Privacy policy</a><i class="fa fa-angle-right"></i></li>
                    </ul>
                </div>
                

                
                <div class="col-md-3 map-img md-margin-bottom-40">
                    <div class="headline"><h2>Contact Us</h2></div>
                    <address class="md-margin-bottom-40">
                        <a href="https://www.google.co.uk/maps/place/I2+Office+Aldersgate/@51.5175798,-0.0978509,19z/data=!4m2!3m1!1s0x0000000000000000:0x71133b028b4f269d" target="_blank">200 Aldersgate, EC1A 4HD<br>
                            London, UK </a><br>
                        Phone: +44 203 440 4015 <br>
                        Email: <a href="mailto:hello@codurance.com" target="_blank" class="">hello@codurance.com</a>
                    </address>
                </div>
                
            </div>
        </div>
    </div>

    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>
                        Company Registration No: 8712584
                    </p>
                </div>

                
                <div class="col-md-6">
                    <ul class="footer-socials list-inline">
                        <li>
                            <a href="https://www.facebook.com/codurance/" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Facebook" target="_blank">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/company/codurance" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Linkedin" target="_blank">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://twitter.com/codurance" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Twitter" target="_blank">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/atom.xml" data-original-title="Feed" class="tooltips" data-toggle="tooltip" data-placement="top" title="" target="_blank">
                                <i class="fa fa-rss"></i>
                            </a>
                        </li>
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
</div>

</div>

<script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>

<script type="text/javascript" src="/assets/plugins/owl.carousel.2.0.0/owl.carousel.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="/assets/plugins/gmap/gmap.js"></script>

<script type="text/javascript" src="/assets/js/custom.js"></script>

<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/pages/index.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function() {
        App.init();
        Contact.initMap();
    });
</script>
</body>
</html>

